<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="./css/styles.css">
  <link rel="stylesheet" href="./css/editor.css">
  <link rel="stylesheet" href="../node_modules/spinkit/css/spinkit.css">
  <link rel="stylesheet" href="../node_modules/@fortawesome/fontawesome-free/css/all.css">
  <link rel="stylesheet" href="../node_modules/jquery-contextmenu/dist/jquery.contextMenu.css">
  <link rel="stylesheet" href="../node_modules/katex/dist/katex.css">

  <title>Editor</title>
</head>

<body style="height: 95%; overflow: hidden;">

  <nav id="navbar" class="navbar fixed-top navbar-light bg-light w-100 editor-navbar">
    <!-- toolbar -->
    <div class="row align-items-center justify-content-center no-gutters w-100 h-75">
      <div class="col-sm-12 col-md-11 col-lg-10 col-xl-9">
        <div id="toolbar" class="btn-group h-100" role="group">
          <button command="return" class="btn btn-light btn-sm mr-3" type="button"><img class="img-fluid"
              src="assets/editor/left-arrow.png" /></button>
          <button command="bold" value="" class="btn btn-light btn-sm" type="button"><img class="img-fluid"
              src="assets/editor/bold.png" /></button>
          <button command="italic" value="" class="btn btn-light btn-sm" type="button"><img class="img-fluid"
              src="assets/editor/italic.png" /></button>
          <button command="underline" value="" class="btn btn-light btn-sm" type="button"><img class="img-fluid"
              src="assets/editor/underline.png" /></button>
          <button command="justifyLeft" value="" class="btn btn-light btn-sm" type="button"><img class="img-fluid"
              src="assets/editor/left-align.png" /></button>
          <button command="justifyCenter" value="" class="btn btn-light btn-sm" type="button"><img class="img-fluid"
              src="assets/editor/align-center.png" /></button>
          <button command="justifyRight" value="" class="btn btn-light btn-sm" type="button"><img class="img-fluid"
              src="assets/editor/right-align.png" /></button>
          <button command="justifyFull" value="" class="btn btn-light btn-sm" type="button"><img class="img-fluid"
              src="assets/editor/justify.png" /></button>
          <button command="insertUnorderedList" value="" class="btn btn-light btn-sm" type="button"><img class="img-fluid"
              src="assets/editor/list.png" /></button>
          <button command="insertOrderedList" value="" class="btn btn-light btn-sm" type="button"><img class="img-fluid"
              src="assets/editor/list-1.png" /></button>
          <button class="btn btn-light btn-sm modal-open-button" type="button" data-toggle="modal"
            data-target="#reference-modal" tab-index="-1" role="dialog" aria-labelledby="referenceModal"><img class="img-fluid"
              src="assets/editor/reference.png" /></button>
          <button id="open-image-selector" class="btn btn-light btn-sm modal-open-button" type="button" data-toggle="modal"
            data-target="#image-modal" tab-index="-1" role="dialog" aria-labelledby="imageModal"><img class="img-fluid"
              src="assets/editor/image.png" /></button>
          <button id="open-table-selector" class="btn btn-light btn-sm modal-open-button" type="button" data-toggle="modal"
            data-target="#table-modal" tab-index="-1" role="dialog" aria-labelledby="tableModal"><img class="img-fluid"
              src="assets/editor/grid.png" /></button>
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-light btn-sm dropdown-toggle font-weight-bolder" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              Sections
            </button>
            <div id="headings-dropdown" class="dropdown-menu">
            </div>
          </div>
          <button id="open-equation-selector" class="btn btn-light btn-sm modal-open-button" type="button" data-toggle="modal"
            data-target="#equation-modal" tab-index="-1" role="dialog" aria-labelledby="equationModal"><img class="img-fluid"
              src="assets/editor/symbol.png" /></button>
          <div class="btn-group" role="group">
            <button id="dropdown-button" type="button" class="btn btn-light btn-sm dropdown-toggle font-weight-bolder"
              data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Templates
            </button>
            <div class="dropdown-menu" id="templates-dropdown">
              <input type="hidden" value="" id="current-template" />
            </div>
          </div>
          <button id="compile" class="btn btn-light btn-sm" type="button"><img class="img-fluid"
              src="assets/editor/profits.png" /></button>
          <button id="arguments-modal-button" class="btn btn-light btn-sm ml-2 font-weight-bold disabled modal-open-button" type="button"
            data-toggle="modal" data-target="#arguments-modal">TemplateArguments</button>
        </div>
      </div>
      <div class="col-1 pl-3">
          <div id="save-loader" class="sk-wave pt-3 pb-2 d-none">
              <div class="sk-rect sk-rect1"></div>
              <div class="sk-rect sk-rect2"></div>
              <div class="sk-rect sk-rect3"></div>
            </div>
          <div id="save-hint" class="text-muted font-weight-bold">
            saved &#x2714
          </div>
      </div>
    </div>
  </nav>

  <div class="row mt-5 mb-4 ml-2 mr-2 w-100 h-100">

    <div id="content-panel" class="col split h-100 d-flex">

      <!-- Tree Panel -->
      <div id="tree-panel" class="pinned">
        <ul id="tree" class="mt-4 rounded text-left">
          <div class="text-right pt-3 pr-3">
            <button id="pin-tree-panel" class="btn btn-light pinned"><i id="pin-icon"
                class="pinned fas fa-thumbtack"></i></button>
          </div>
          <p class="font-weight-bold">目录</p>
          <a id="refresh-link" class="ml-1 mb-5" href="#" style="color: black; font-size: 0.8rem">刷新</a>
          <div class="w-75">
            <hr class="mt-2 mb-2">
          </div>
          <div id="part-arguments" class="d-none">
          </div>
          <div class="w-75">
            <hr class="mt-2 mb-2">
          </div>
        </ul>
      </div>

      <!-- Editor Panel -->
      <div class="w-100 mt-1 ml-4" id="editor-panel">
        <!-- text area -->
        <div class="h-100 w-100">
          <div class="row h-100 mt-4 no-gutters">
            <div class="col h-100">
              <div id="part-args-editor" class="row h-25 mt-4 align-items-center justify-content-center no-gutters d-none">
                <div class="col h-100">
                  <div id="part-args-name" class="font-weight-bold mb-4"></div>
                  <div id="part-editor" class="editor w-100" contenteditable></div>
                  <button class="btn btn-primary mt-2" id="part-args-confirm">Confirm</button>
                </div>
              </div>
              <div id="editor" class="editor" contenteditable></div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div id="pdf-panel" class="col mt-4 mb-4 mr-1 split">
      <webview class="w-100 h-100" src="./pdfviewer.html" nodeintegration></webview>
    </div>

  </div>

  <!-- Arguments Modal -->
  <div class="modal fade" id="arguments-modal" tabindex="-1" role="dialog" aria-labelledby="argumentsModal"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="arguments-modal-title"></h5>
        </div>
        <div class="modal-body" id="arguments-modal-body">
        </div>
        <div class="modal-footer">
          <button id="arguments-confirm" type="button" class="btn btn-secondary modal-dismiss-button" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Reference Inserting Modal -->
  <div class="modal fade" id="reference-modal" tabindex="-1" role="dialog" aria-labelledby="referenceModal"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Choose</h5>
        </div>
        <div class="modal-body" id="scripts-modal-body">
          <div class="form-check">
            <input class="form-check-input" type="radio" name="radio1" id="reference-sup-check" checked>
            <label class="form-check-label" for="radio1">
              Texts<sup>[*]</sup>
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="radio1" id="reference-normal-check">
            <label class="form-check-label" for="radio1">
              Texts[*]
            </label>
          </div>
          <div class="mt-4">
            <p class="font-weight-bold">Input reference with bibtex's style:</p>
            <div id="reference-editor" class="reference-editor" contenteditable='plaintext-only'></div>
            <p class="mt-3">
              <b>Extracted Labels:</b><br>
              <span id="extracted-labels"></span>
            </p>
            <input id="reference-value" type="hidden" />
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary modal-dismiss-button" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Image Inserting Modal -->
  <div class="modal fade" id="image-modal" tabindex="-1" role="dialog" aria-labelledby="imageModal"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Choose images:</h5>
        </div>
        <div class="modal-body">
          <div class="custom-file">
            <input type="file" class="custom-file-input" id="choose-image" accept="image/png, image/jpeg, image/bmp">
            <label id="choose-image-name" class="custom-file-label" for="customFile">Choose file</label>
            <div class="input-group mt-2">
              <div class="input-group-prepend">
                <span class="input-group-text" id="input-image-name-label">Caption</span>
              </div>
              <input id="image-caption" type="text" class="form-control" placeholder="Image's caption" aria-label="caption"
                aria-describedby="input-image-name-label">
            </div>
          </div>
          <img class="img-fluid mt-3" id="show-choose-image" />
        </div>
        <div class="modal-footer">
          <button id="image-confirm" type="button" class="btn btn-primary modal-dismiss-button" data-dismiss="modal">Confirm</button>
          <button type="button" class="btn btn-secondary modal-dismiss-button" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Table Inserting Modal -->
  <div class="modal fade" id="table-modal" tabindex="-1" role="dialog" aria-labelledby="tableModal"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Insert tables:</h5>
        </div>
        <div class="modal-body">
          <div class="row pl-5 pr-5 w-100 mb-3">
            <div class="col-12">
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text font-weight-bold" id="table-caption-label">Caption</span>
                </div>
                <input id="table-caption" type="text" class="form-control" placeholder="caption"
                  aria-describedby="table-caption-label">
              </div>
            </div>
          </div>
          <div class="row pl-5 pr-5 mb-2 w-100 align-items-center justify-content-center">
            <div class="col-6">
              <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text font-weight-bold" id="table-row-label">Row</span>
                  </div>
                  <input id="table-row-number" type="text" class="form-control" placeholder="3" aria-describedby="table-row-label">
                </div>
              </div>
            <div class="col-6">
              <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text font-weight-bold" id="table-col-label">Col</span>
                  </div>
                  <input id="table-col-number" type="text" class="form-control" placeholder="3" aria-describedby="table-col-label">
                </div>
              </div>
          </div>
          <div class="row p-2 w-100 h-75 align-items-center justify-content-center">
            <div class="col-auto m-1 p-2 table-container block-container block-highlight">
              <table id="all-table" class="modal-example-table" frame="box" rules="all">
                <tr>
                  <th>Head 1</th>
                  <th>Head 2</th>
                </tr>
                <tr>
                  <td>Text</td>
                  <td>Text</td>
                </tr>
              </table>
            </div>
            <div class="col-auto m-1 p-2 table-container block-container">
              <table id="lrm-table" class="modal-example-table" frame="hsides" rules="all">
                <tr>
                  <th>Head 1</th>
                  <th>Head 2</th>
                </tr>
                <tr>
                  <td>Text</td>
                  <td>Text</td>
                </tr>
              </table>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="table-confirm" type="button" class="btn btn-primary modal-dismiss-button" data-dismiss="modal">Confirm</button>
          <button type="button" class="btn btn-secondary modal-dismiss-button" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Equation Inserting Modal -->
  <div class="modal fade" id="equation-modal" tabindex="-1" role="dialog" aria-labelledby="equationModal" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Insert equations:</h5>
        </div>
        <div class="modal-body">
          <div class="row w-100 h-75 justify-content-center">
            <div class="col-auto p-2 m-1 block-container equation-container" eq-style="inline">
              <p><b>Inline Mode</b></p>
              <p>Equation is <span id="example-inline-equation">f(x) = x^2</span>.</p>
            </div>
            <div class="col-auto p-2 m-1 block-container equation-container block-highlight" eq-style="display-numbered">
              <p><b>Display Mode - Numbered</b></p>
              <p>Equation is:</p>
              <p>&emsp;&emsp;&emsp;&emsp;<span id="example-display-numbered-equation">f(x) = x^2</span>&emsp;&emsp;(1)</p>
            </div>
            <div class="col-auto p-2 m-1 block-container equation-container" eq-style="display-unnumbered">
              <p><b>Display Mode - Unnumbered</b></p>
              <p>Equation is:</p>
              <p>&emsp;&emsp;&emsp;&emsp;<span id="example-display-unnumbered-equation">f(x) = x^2</span></p>
            </div>
          </div>
        
        <div class="mt-2 w-100 p-3">
          <p>Type math here: </p>
          <textarea id="math-field" class="w-50"></textarea>
          <p id="rendered-input-equation"></p>
          <p>LaTeX of what you typed: <span id="latex"></span></p>
        </div>
        </div>
        <div class="modal-footer">
          <button id="equation-confirm" type="button" class="btn btn-primary modal-dismiss-button"
            data-dismiss="modal">Confirm</button>
          <button type="button" class="btn btn-secondary modal-dismiss-button" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    delete module.exports
  </script>
  <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="../node_modules/jquery-contextmenu/dist/jquery.contextMenu.js"></script>
  <script src="../node_modules/jquery-contextmenu/dist/jquery.ui.position.js"></script>
  <script src="../node_modules/interactjs/dist/interact.js"></script>
  <script src="../node_modules/katex/dist/katex.js"></script>
  <script src="js/ASCIIMathML.js"></script>
  <script src="js/ASCIIMathTeXImg.js"></script>
  <script src="js/editor.js"></script>
</body>

</html>